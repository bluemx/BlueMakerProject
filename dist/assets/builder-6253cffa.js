import{P as w,u as b,l as n,s as r}from"./app-9aebb73f.js";const k=w("builder",()=>{const m=b(),u=n(null),a=n(null),l=n(),s=n(),d=n(null),i=async(e,o)=>{const{data:t,error:D}=await r.from("documents").insert([{key:e,content:o}]).select().single();console.log(t),m.push(`/${u.value}/${t.key}`)},v=async e=>{s.value=e;const{data:o,error:t}=await r.from("documents").select("*").eq("key",e).single();return a.value=o,c(),!0},f=()=>a.value?a.value.content:null,p=e=>{const{data:o}=r.storage.from(u.value).getPublicUrl(s.value+"/"+e);return o.publicUrl},y=async()=>{await r.from("documents").update(a.value).eq("key",s.value)},g=()=>{},c=async()=>{l.value=[];const{data:e,error:o}=await r.storage.from(u.value).list(s.value,{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});e.forEach(t=>{l.value.push({name:t.name,url:p(t.name),mimetype:t.metadata.mimetype})})};return{menu:d,type:u,doc:a,dockey:s,files:l,newDoc:i,loadDoc:v,getContent:f,updateAssets:c,saveDoc:y,downloadDoc:g}});export{k as u};
