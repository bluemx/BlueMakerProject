// src/define-props-refs.ts
var import_language_core = require("@volar/language-core");
var plugin = ({ vueCompilerOptions }) => {
  vueCompilerOptions.macros.defineProps.push("definePropsRefs");
  return {
    name: "vue-macros-define-props-refs",
    version: 1,
    resolveEmbeddedFile(fileName, sfc, embeddedFile) {
      var _a;
      if (embeddedFile.kind !== import_language_core.FileKind.TypeScriptHostFile || !((_a = sfc.scriptSetup) == null ? void 0 : _a.content.includes("definePropsRefs")))
        return;
      try {
        rewriteImports(embeddedFile);
      } catch {
      }
    }
  };
};
var REGEX = /(const\s*{.*?)((,\s*)?withDefaults)(.*?})/;
function rewriteImports(file) {
  const idx = file.content.findIndex(
    (s) => typeof s === "string" && REGEX.test(s)
  );
  if (idx === -1)
    return;
  file.content[idx] = file.content[idx].replace(REGEX, "$1$4");
}
module.exports = plugin;
